(()=>{"use strict";var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),t=new Uint8Array(16);function n(){if(!e)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,r=function(e){return"string"==typeof e&&o.test(e)};for(var i=[],a=0;a<256;++a)i.push((a+256).toString(16).substr(1));const s=function(e,t,o){var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){o=o||0;for(var s=0;s<16;++s)t[o+s]=a[s];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!r(n))throw TypeError("Stringified UUID is invalid");return n}(a)},c="HABU_1P_ID",l="__Habu_questionList",u="bowline",d="__Habu^bowline",m="ns",f="siteConfig",g="data-confuid",p="habu-question-slot",h={missingContainer:new Error("Missing Parent Container"),missingConfiguration:new Error("Missing configuration ID")},w={recordAnswers:"RECORD_ANSWER",recordEmail:"RECORD_EMAIL",transmitQuestions:"SENDQ",wave:"WAVE"},y="cringle",b="forefoot",_="CLIENT_ID",I="HABU_1P_ID",E="4.3.3",O=e=>({propertyID:e.propertyID,quarterdeckID:e.ID,organizationID:e.orgID,domain:window.location.hostname,pageUrl:`${window.location.hostname}${window.location.pathname}`});function C(e,t,n){if(0!==n)for(let o=0;o<t.length;o+=1){if(t[o]===e)return t[o];if(t[o]instanceof Object){const r=A(e,t[o],n-1);if(r)return r}else if(t[o]instanceof Array){const r=C(e,t[o],n-1);if(r)return r}}}function A(e,t,n){if(0===n)return;const o=Object.keys(t);for(let r=0;r<o.length;r+=1){if(o[r]===e)return t[o[r]];if(t[o[r]]instanceof Object){const i=A(e,t[o[r]],n-1);if(i)return i}else if(t[o[r]]instanceof Array){const i=C(e,t[o[r]],n-1);if(i)return i}}}const T=async(e,t={},n=3)=>{const o=new Headers([["Accept","application/json"],["Access-Control-Allow-Credentials","true"]]);try{const n=await fetch(e,{credentials:"include",headers:o,...t});return await(n.ok?n.json():void 0)}catch(o){return n>1?T(e,t,n-1):void 0}},v=(e,t)=>{const n=new Headers([["Accept","application/json"],["Access-Control-Allow-Credentials","true"],["Content-Type","application/x-www-form-urlencoded"]]);return fetch(e,{method:"POST",mode:"no-cors",credentials:"include",headers:n,body:t})},S=()=>document.cookie.split(";").reduce(((e,t)=>Object.assign(e,{[t.split("=")[0].trim()]:t.split("=")[1]})),{}),D=()=>s(),R=e=>e,U=e=>Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&"),N=(e="")=>{try{return JSON.parse(e)}catch(e){return{}}},P=()=>{const e=document.querySelector("[data-confuid]");return e?e.getAttribute(g):void 0},j=(e,t)=>{if("string"==typeof e&&0!==e.length)try{return e.split(".").reduce(((e,t)=>{if(t.indexOf("[")>=0){const n=t.slice(t.indexOf("[")+1,t.indexOf("]"));return e[parseInt(n,10)]}return e[t]}),t)}catch(e){return e instanceof TypeError?void 0:void console.warn(e)}},H="https://fulcrum-antenna.imhd.io/collect/registration/3087a8ff-41b4-401c-98a9-9a4c8706a3ca/imhd",$="https://fulcrum-antenna.imhd.io/collect/registration/2b85ffa6-2fbd-4fad-93f7-dba57b2c782b/imhd",k={adh_asics:"https://fulcrum-antenna.imhd.io/getuid/imhd/google-adh?account_id=asics_adh",amazon_us:"https://fulcrum-antenna.imhd.io/getuid/imhd/amazon-us",liveramp:"https://fulcrum-antenna.imhd.io/getuid/imhd/liveramp",throtle:"https://fulcrum-antenna.imhd.io/getuid/imhd/throttle"},L={INFO:"Info",WARN:"Warn",ERROR:"Error"},B=(e={})=>{let t;t=e instanceof Array?{msg:e.join("; "),pageUrl:`${window.location.hostname}${window.location.pathname}`,type:L.INFO}:"object"!=typeof e?{msg:e,pageUrl:`${window.location.hostname}${window.location.pathname}`,type:L.INFO}:e;const n=Object.keys(t).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)).join("&");return v("https://fulcrum-antenna.imhd.io/collect/jserrors/2041517b-a8db-4bd8-902c-a5eea719db61/imhd",n)},x=(e=.1)=>Math.random()+e>1?B:()=>{},q=L;function F(e){const t=e||M()||D();((e,t)=>{const n=encodeURIComponent("HABU_1P_ID"),o=encodeURIComponent(t),r=new Date,i=r.getTime()+2592e7;r.setTime(i);const a=`expires=${r.toUTCString()};max-age=25920000`;document.cookie=`${n}=${o};${a};path='/';secure; samesite=none`})(0,t),sessionStorage.setItem(c,t),localStorage.setItem(c,t)}function M(){const e=S().HABU_1P_ID,t=sessionStorage.getItem(c),n=localStorage.getItem(c);return e||t||n||null}const J=function(e,t,n){if(!window.__Habu[e])return n;const o=window.__Habu[e].bowline.filter((e=>e===t||"object"==typeof e&&Object.keys(e).includes(t))).pop();return o?o[t]:n},Q=function(e){const t=function(){const e=[],t=()=>{},n=["fill","pop","reverse","shift","sort","splice","unshift"];return Object.getOwnPropertyNames(Array.prototype).filter((e=>n.includes(e))).forEach((n=>{e[n]=t})),e}(),n=function(){const e=window.__Habu||N(localStorage.getItem(d));return e?e.version!==E||Date.now()-e.ts>1728e5?null:e:null}()||{};n[e]&&Array.isArray(n[e].bowline)&&t.push(...n[e].bowline),n.huid=n.huid||M(),n.ts=Date.now(),n.version=E,n.ns=e,n[e]={[m]:e,[u]:t},window.__Habu=n,localStorage.setItem(d,JSON.stringify(window.__Habu))},V=function(e){if(!e||!e.details)return;const t=e.details.bowline||{},n=j(t.match,window);if(!n)return;if(!(n instanceof Array||n instanceof Object))return;if(!Array.isArray(t.highlights))return void x(.05)({type:q.ERROR,msg:"Corrupt Configuration: "+t.highlights,action:"Bowline: Iterate through highlights",...O(e)});const o=[];return t.highlights.forEach((e=>{let t;if(e.match?t=localStorage.getItem(e.match)||S()[e.match]||j(e.match,n):Array.isArray(n)?t=C(e.key,n,3):n instanceof Object&&(t=A(e.key,n,3)),!t)return;const r=Array.isArray(t)?t.join(","):t;o.push({key:e.key,value:r,type:e.type})})),o},z=function(e,t){window.__Habu[e].bowline.push(t),localStorage.setItem(d,JSON.stringify(window.__Habu))},G=[{code:"identity_management"},{code:"targeted_advertising"},{code:"personalization_optimization"},{code:"segmentation"},{code:"modeling"},{code:"activation"},{code:"analytics_insights"},{code:"data_sales"}],W=e=>{const t=[];return M()&&t.push({type:I,userID:M()}),e&&(F(e),t.push({type:_,userID:e})),t},Y={getConsent:([e,t,n,o])=>{const r=J(e,f);let i,a;o?(i=_,a=o):M()?(i=I,a=M()):n({success:!1,error:"Missing Identity",flags:G}),T(((e,t,n)=>`https://origin-gangway.habu.com/gangway/${e}/user-consent/type/${t}/user/${n}`)(r.orgID,i,a),{method:"GET"},1).then((e=>{const o=e&&e.processingActivitiesUserConsent;e&&o?o&&0!==o.length?t({success:!0,flags:o}):n({success:!1,error:"Consent not set",flags:G}):n({success:!1,error:"Internal Service Error: Gangway. Please contact us",flags:G})})).catch((e=>n({success:!1,flags:G,error:e})))},setConsent:([e,t,n,o,r])=>{if(!r)return n(new Error("Missing consent signals"));if(!Array.isArray(r))return n(new Error("Expected Array"));if(0===r.length)return n(new Error("Empty Array"));const i=J(e,f),a=O(i),s="boolean"==typeof r[0]?G.map((e=>({...e,allowed:r[0]}))):r,c={...a,identities:JSON.stringify(W(o)),consentJson:JSON.stringify(s)};return z(e,{CONSENT_FLAGS:c}),v("https://fulcrum-antenna.imhd.io/collect/consent/c2661ce9-a421-465e-8b08-4c3e223b8ce3/imhd",U(c)).then((()=>t({success:!0,flags:s}))).catch((e=>n({error:e,success:!1})))},portability:([e,t,n,o])=>{const r=D(),i=J(e,f),a={...O(i),identities:JSON.stringify(W(o)),requestID:r};v("https://fulcrum-antenna.imhd.io/collect/portability/203f3c3a-c0cf-4629-9f76-9b70093059de/imhd",U(a)).then((()=>t({success:!0,requestID:r}))).catch((e=>n({error:e,success:!1})))},rtbf:([e,t,n,o,r])=>{const i=D(),a=J(e,f),s={...O(a),identities:JSON.stringify(W(o)),requestID:i};r&&(s.email=r),v("https://fulcrum-antenna.imhd.io/collect/rtbf/7014021d-f07a-45d0-8bd8-c21d44eb291e/imhd",U(s)).then((()=>t({success:!0,requestID:i}))).catch((e=>n({error:e,success:!1})))}};async function K(e,t,n){const{orgID:o}=J(e,f,{});if(!o)return Promise.reject(new Error("Invalid Organization"));const r=localStorage.getItem(`${e}^__Habu_duct^${t}`),i=J(e,"duct^"+t);if(r)return Promise.resolve(N(r));if(i)return Promise.resolve(i);{const e=await T(((e,t,n)=>`https://nestorix.imhd.io/nestorix/organization/${e}/user-data/type/${t}/user/${n}`)(o,t,n),{},1);return e&&e.data?Promise.resolve(e.data):Promise.reject(new Error(e.error||"Unknown response"))}}function X([e,t,n]){const o=M(),r=I;return o?K(e,r,o).then((o=>{o?o.error?n({success:!1,error:o.error}):(z(e,{["duct^"+r]:o.data}),localStorage.setItem(`${e}^__Habu_duct^${r}`,JSON.stringify(o.data)),t({success:!0,data:o.data})):n({success:!1,error:"Unknown response"})})).catch((t=>{const o=J(e,f);x()({type:q.ERROR,msg:"API response error: "+t,action:"DataDuct: Fetch user data",...O(o)}),n({success:!1,error:t.message})})):n({success:!1,error:"Cannot resolve user id"})}const Z={get1pData:X,getUserData:K,init:function(e){X([e,R,R])}},ee={CAPTURE_CONSENT:"CAPTURE_CONSENT",GET_CONSENT:"GET_CONSENT",REQUEST_PORTABILITY:"REQUEST_PORTABILITY",REQUEST_RTBF:"REQUEST_RTBF",ENABLE_DUCT:"ENABLE_DUCT",LIST_ABILITIES:"LIST_ABILITIES"},te={CAPTURE_CONSENT:Y.setConsent,GET_CONSENT:Y.getConsent,REQUEST_PORTABILITY:Y.portability,REQUEST_RTBF:Y.rtbf,ENABLE_DUCT:Z.get1pData,LIST_ABILITIES:([e,t])=>t(Object.values(ee))},ne=[],oe=e=>(t,...n)=>(e=>!!ee[e])(t)?(ne.push([t,n]),new Promise(((t,n)=>{setTimeout((()=>{((e,t,n)=>{const[o,r]=ne.pop();te[o]([e,t,n,...r])})(e,t,n)}),1e3)}))):Promise.reject(new Error("Invalid Ask"));function re(){const e=[void 0,null,""],t=new Date;let n={};if(window.location.ancestorOrigins&&window.location.ancestorOrigins.length>0)n={Url1:window.location.ancestorOrigins[0]};else{n={Url1:window.location.hostname,Url2:window.location.pathname,Url3:window.location.search};const e=["utm_source","utm_medium","utm_campaign"];window.location.search.substring(1).split("&").forEach((t=>{const[o,r]=t.split("=").map((e=>decodeURIComponent(e)));e.includes(o)&&(n[o]=r)}))}const o={...n,userAgent:window.navigator.userAgent,os:window.navigator.platform,tod:t.getTime(),dow:t.getUTCDay()},r={};return Object.keys(o).forEach((t=>{-1===e.indexOf(o[t])&&(r[t]=o[t])})),r}const ie=async e=>{const t=J(e,f);let n={};n={...n,...re()};const o=function(){const e=document.getElementsByTagName("meta"),t={};let n,o;for(let r=0;r<e.length;r+=1)n=e[r].getAttribute("property")||e[r].getAttribute("name"),o=e[r].getAttribute("content"),n&&o&&(t[n.substring(n.indexOf(":")+1)]=o);return t}();Object.keys(o).length>0&&(n.metaTags=JSON.stringify(o));const r=M();var i;r&&(n={...n,HABU_1P_ID:r}),function(e){const t=document.createDocumentFragment();e.reduce(((e,t)=>((e,t,n=document.createDocumentFragment())=>{const o=document.createElement(e);return t.forEach((e=>o.setAttribute(e.key,e.value))),n.appendChild(o),n})("img",[{key:"width",value:"1px"},{key:"height",value:"1px"},{key:"src",value:t}],e)),t),document.getElementsByTagName("head")[0].appendChild(t)}((i=t.details)&&Object.hasOwnProperty.call(i,"partners")?Object.keys(k).filter((e=>i.partners.includes(e))).map((e=>k[e])):[]);const a=await function(e){const t=new Promise((e=>e(void 0)));return e.details.bowline&&Array.isArray(e.details.bowline.highlights)?0===e.details.bowline.highlights.length?t:new Promise((t=>{let n,o=600;const r=setInterval((()=>{n=V(e),o-=1,n?(clearInterval(r),t(((e=[],t,n="value")=>Array.isArray(t)&&Array.isArray(e)?0===t.length?{}:e.map((e=>({[t.map((t=>{return o=e,(n=t).startsWith("$")?o[n.substring(1)]:n;var n,o})).join(".")]:e[n]}))).reduce(((e,t)=>({...e,...t})),{}):{})(n,["bowline","$type","$key"]))):0===o&&(x()({type:q.ERROR,msg:"Cannot find client DL: "+e.details.bowline.match,action:"Bowline: Locate client dl",...O(e)}),t())}),100)})):t}(t);return a&&(n={...n,...a}),async function(e,t){return T("https://fulcrum-antenna.imhd.io/collect/pageview/297c2761-8f57-4e48-9846-c406b915ce0b/imhd",{method:"POST",mode:"no-cors",credentials:"include",body:U({...e,...O(t)}),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}(n,t)},ae={html:'\n    <div class="habu-entity-text">\n      <form action="#" autocomplete="on" onsubmit="window.__Habu.sendEmail(localStorage.getItem(\'__Habu_currentAnswerValue\')); return false;">\n        <label style="display: block">\n          <p class="template-questions">Sign up for exclusive content and offers so you can be first in the know.</p>\n          <input class="habu-email" name="user-input" type="email" placeholder="Email" required />\n        </label>\n        <br />\n        <button class="habu-primary-btn" type="submit"><span>Submit</span></button>\n      </form>\n    </div>\n  ',viewUrl:$,type:"email",submitUrl:H},se={html:'\n    <div class="habu-entity-text">\n      <form>\n        <p class="template-questions">Thank You!</p>\n      </form>\n    </div>\n  ',type:"neutral",viewUrl:!1},ce=x(.1),le=()=>document.getElementById(p),ue=e=>{window.__Habu.widgetConfigID=e||P()},de=()=>window.__Habu.widgetConfigID,me=(()=>{const e={},t=M();return function(n){if(e[n])return e[n];{const o={widgetConfigID:n};return t&&(o.userID=t),e[n]=o,e[n]}}})();async function fe(){const e=de(),t=await T("https://origin-getafix.imhd.io/getafix/questions/fetch",{method:"POST",body:JSON.stringify(me(e))});t&&localStorage.setItem(l,JSON.stringify(t.entityScripts))}function ge(){const e=localStorage.getItem(l);let t=N(e);if(!(t instanceof Array))return"";0===t.length&&(t=[ae,se]);const n=t.splice(0,1).pop(),o=JSON.stringify(t);return localStorage.setItem(l,o),localStorage.setItem("__Habu_currentQuestionId",n.entityID),n}function pe(e,t){const n=J(e,f),o=de();let r,i={};if(Object.hasOwnProperty.call(t,"type")&&"email"===t.type)r=$;else{if(Object.hasOwnProperty.call(t,"type")&&"neutral"===t.type)return;r="https://fulcrum-antenna.imhd.io/collect/declared/947f14e3-a1d5-4048-818e-4f916200945c/imhd",i={questionID:t.entityID}}T(r,{method:"POST",body:U({...O(n),...me(o),...i}),mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function he(e){const t=ge();((e,t)=>{if(!e)throw x()({type:q.ERROR,msg:"Client error: Missing parent container: habu-question-slot",action:"Forefoot: Render into container",pageUrl:`${window.location.hostname}${window.location.pathname}`}),h.missingContainer;const n=document.createDocumentFragment(),o=document.createElement("div");o.style.height="100%",o.style.width="100%",o.innerHTML=t;const r=o.getElementsByClassName("habu-entity-styles")[0];if(n.appendChild(o),r)e.firstElementChild?e.replaceChild(n,e.firstElementChild):e.appendChild(n);else{const t=e.getElementsByClassName("habu-entity-text")[0];t.parentNode.replaceChild(n,t)}})(le(),t.html),pe(e,t),Object.hasOwnProperty.call(t,"type")&&"neutral"===t.type||(()=>{const e=["radio","email"],t=document.getElementById(p).querySelector("div form");t?t.querySelectorAll("input").forEach((t=>{e.includes(t.type)&&t.addEventListener("change",(e=>localStorage.setItem("__Habu_currentAnswerValue",e.target.value)),!1)})):x()({type:q.INFO,msg:"Wrong html structure. Expected: questionSlot > div > form",action:"Utils: Init User Input Widget with event listeners",pageUrl:`${window.location.hostname}${window.location.pathname}`})})()}function we({ns:e,widgetConfigID:t},n){const o=me(t),r=J(e,f),i=O(r);return function(e,t){T("https://fulcrum-antenna.imhd.io/collect/declared/4a2fc4b9-60f8-4a90-a8af-e830308e5495/imhd",{method:"POST",body:U({...i,...o,questionID:e,answer:t}),mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(n)}}function ye({ns:e,widgetConfigID:t},n){const o=me(t),r=J(e,f),i=O(r);return function(e){T(H,{method:"POST",body:U({...i,...o,email:e}),mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(n)}}const be={"ID":"ac6fef62-bd2a-4a29-8a7d-cd60cbe612b7","CreatedAt":"2021-04-16T15:45:33.263683Z","CreatedByUserID":"712da422-c774-4192-a71d-a2d7da509853","UpdatedAt":"2021-05-13T20:31:21.057942Z","UpdatedByUserID":"4f16b067-1235-4f28-9e03-9610f9fa2e4c","DeletedAt":null,"propertyID":"ba974e3b-e264-4cc8-aed7-905717e06376","orgID":"7df72989-875a-4608-9e0a-0bbc81fcefc1","details":{"bowline":{"highlights":[{"key":"bodyStyle","type":"pageAttribute"},{"key":"category","type":"pageAttribute"},{"key":"make","type":"pageAttribute"},{"key":"model","type":"pageAttribute"},{"key":"price","type":"pageAttribute"},{"key":"section","type":"pageAttribute"},{"key":"year","type":"pageAttribute"}],"match":"window.btData"},"collectPageViews":"true","partners":["liveramp","throtle"],"version":"steady"},"namespace":"ac6fef62-bd2a-4a29-8a7d-cd60cbe612b7"};(()=>{if(!Object.hasOwnProperty.call(be,"details")||!Object.hasOwnProperty.call(be.details,"version"))return void x()({type:q.ERROR,msg:"Quarterdeck: Missing/Malformed config",action:"Habu.js: Load config",domain:window.location.hostname,pageUrl:`${window.location.hostname}${window.location.pathname}`,...be});const e=be.details,t=be.ID;var n;F(),Q(t),z(t,{[f]:be}),n=t,window.__Habu&&window.__Habu[n]||Q(n),window.__Habu[n].do=oe(n),window.__Habu.do=oe(window.__Habu.ns),Z.init(t),((e,t)=>{Object.hasOwnProperty.call(e,"accelerator")&&"data"===e.accelerator&&setTimeout((()=>(e=>{le()?function(e){const t=P(),n=J(e,f);if(!t)throw ce({type:q.ERROR,msg:"Client error: Missing configurationID",action:"Forefoot: Locate native data accelerator div",...O(n)}),h.missingConfiguration;window.__Habu={...window.__Habu,sendAnswer:we({ns:e,widgetConfigID:t},(()=>he(e))),sendEmail:ye({ns:e,widgetConfigID:t},(()=>he(e)))},ue(t),fe().then((()=>he(e)))}(e):function(e){const t=J(e,f),n=O(t);window.addEventListener("message",(t=>{const{data:o}=t;if(o&&o.from===y&&o.to===b&&Object.values(w).includes(o.type))if(o.type===w.wave){const{widgetConfigID:r}=o;if(!r)throw ce({type:q.ERROR,msg:"Client error: Missing configurationID",action:"Forefoot: Locate iframe with data accelerator",...n}),h.missingConfiguration;window.__Habu={...window.__Habu,sendAnswer:we({ns:e,widgetConfigID:r}),sendEmail:ye({ns:e,widgetConfigID:r})},ue(r),fe().then((()=>t.source.postMessage({to:y,from:b,type:w.wave},t.origin)))}else if(o.type===w.transmitQuestions){const n=ge();pe(e,n),t.source.postMessage({...n,to:y,from:b,type:w.transmitQuestions},t.origin)}else t.isTrusted&&o.type===w.recordAnswers?window.__Habu.sendAnswer(o.questionID,o.answer):t.isTrusted&&o.type===w.recordEmail?window.__Habu.sendEmail(o.email):console.trace(t)}))}(e)})(t))),e.collectPageViews&&setTimeout((()=>ie(t)))})(e,t)})()})();